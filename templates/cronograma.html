<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="refresh" content="15">
  <title>Cronograma Completo</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/visualizar_tudo.css') }}">
</head>

<body class="visualizar-tudo-body">

  <canvas id="matrix-canvas"></canvas>

  <header>
    <div class="titulo">CRONOGRAMA</div>
    <div class="clock" id="clock">--:--:--</div>
    <img class="gif-logo" src="{{ url_for('static', filename='logo2.png') }}" alt="Logo Atalaia">
  </header>

  <div class="painel">
    <div class="tabela-visualizacao">
      <h2>Gravações de Estúdio / Ao Vivo</h2>
      <table>
        <thead>
          <tr>
            <th>Data e Hora</th>
            <th>Tipo da Gravação</th>
            <th>Programa</th>
            <th>Equipe</th>
          </tr>
        </thead>
        <tbody>
          {% for item in estudio %}
          <tr class="{{ item.tipo }}">
            <td>{{ item.data_hora.strftime('%d/%m/%Y %H:%M') }}</td>
            <td>{{ item.tipo }}</td>
            <td>{{ item.descricao_dinamica }}</td>
            <td>
              {% for membro in item.funcionarios_associados %}
              <span>{{ membro.funcionario.nome }} ({{ membro.funcao }})</span><br>
              {% endfor %}
            </td>
          </tr>
          {% else %}
          <tr><td colspan="4">Nenhuma gravação de estúdio para hoje.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="tabela-visualizacao">
      <h2>Gravações Externas</h2>
      <table>
        <thead>
          <tr>
            <th>Data e Hora</th>
            <th>Tipo da Gravação</th>
            <th>Programa</th>
            <th>Equipe</th>
          </tr>
        </thead>
        <tbody>
          {% for item in externa %}
          <tr>
            <td>{{ item.data_hora.strftime('%d/%m/%Y %H:%M') }}</td>
            <td>{{ item.tipo }}</td>
            <td>{{ item.descricao_dinamica }}</td>
            <td>
              {% for membro in item.funcionarios_associados %}
              <span>{{ membro.funcionario.nome }} ({{ membro.funcao }})</span><br>
              {% endfor %}
            </td>
          </tr>
          </tr>
          {% else %}
          <tr><td colspan="4">Nenhuma gravação externa para hoje.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <footer>&copy; TV Atalaia - Todos os direitos reservados.</footer>

  <script>
    function atualizarRelogio() {
      const agora = new Date();
      const horas = agora.getHours().toString().padStart(2, '0');
      const minutos = agora.getMinutes().toString().padStart(2, '0');
      const segundos = agora.getSeconds().toString().padStart(2, '0');
      document.getElementById('clock').textContent = `${horas}:${minutos}:${segundos}`;
    }
    setInterval(atualizarRelogio, 1000);
    atualizarRelogio();
  </script>
</body>
</html>